# 工程简介
学习Spring循环依赖

## @Async引发的循环依赖问题

### 出现循环依赖异常之后如何解决？
#### 解决这个问题的方法很多

* 1、调整对象间的依赖关系，从根本上杜绝循环依赖，没有循环依赖，就没有早期暴露这么一说，那么就不会出现问题

* 2、不使用@Async注解，可以自己通过线程池实现异步，这样没有@Async注解，就不会在最后生成代理对象，也就不会导致跟早期暴露出去的对象不一样

* 3、可以在循环依赖注入的字段上加@Lazy注解


## 延伸阅读

## Spring中事务传播机制
- REQUIRED : 默认的传播特性,如果当前没有事务,则新建一个事务;如果存在事务，则加入这个事务。
- SUPPORTS : 当前存在事务,则加入当前事务，如果没有加事务，则以非事务的方法运行。
- MANDATORY: 当前事务存在,则加入当前事务，如果当前事务不存在，则抛出异常。
- REQUIRES_NEW: 创建一个新事务，如果存在当前事务，则挂起该事务。
- NOT_SUPPORTED: 以非事务的方式执行，如果存在当前事务，则挂起当前事务。
- NEVER : 不适用事务，如果当前存在事务，则抛出异常。
- NESTED : 如果当前存在事务，则嵌套在事务中执行，否则REQUIRED特性一样。 

### NESTED和REQUIRES_NEW的区别?
```shell
REQUIRES_NEW是新建一个事务并且新开始的这个事务和原有事务无关,而NESTED存在事务时会开启一个嵌套事务,
在NESTED情况下,父事务回滚时,子事务也会回滚. 
而REQUIRES_NEW情况下,原有事务回滚,不会影响新开启的事务.
```

### NESTED和REQUIRED的区别?
```shell
REQUIRED的情况下,调用方存在事务时,则被调用方和调用方使用用一个事务,那么被调用方出现异常时,由于共用一个事务,
所以无论是否cache异常,事务都会回滚; 
而在NESTED情况下,被调用方发生异常时,调用方法cache其异常,这样只有子事务回滚,父事务不会回滚.
```

